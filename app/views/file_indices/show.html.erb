<% content_for 'head' do %>
	<%= javascript_include_tag 'jquery' %>
	<%= javascript_include_tag 'jquery-ui' %>
	<%= javascript_include_tag 'jquery.easing' %>
	<%= javascript_include_tag 'jqueryFileTree' %>
	<%= stylesheet_link_tag 'jqueryFileTree' %>
	<style type="text/css">
      .demo{
					background-color:#EEEEEE;
          font-family:Verdana,Arial,Helvetica,sans-serif;
          font-size:11px;
          background-color:#FFFFFF;
          border-color:#BBBBBB #FFFFFF #FFFFFF #BBBBBB;
          border-style:solid;
          border-width:1px;
          height:400px;
          overflow:scroll;
          padding:5px;
          width:200px;
					cursor: move;
      }
	    #target {
	        width:200px;
	        height:200px;
	        border:3px solid #000;
	    
	        right:20px;
	        top:20px;
	        z-index:1;
	        float:right;
	        }
  </style>
	<%= javascript_tag "var AUTH_TOKEN = #{form_authenticity_token.inspect};" if protect_against_forgery? %>
  <script type="text/javascript">
		$(document).ready( function() {
			function eventCallBack(e){
				alert('dropped')
			}
			//Dragging props
	    var dragOpts = {
	        revert:true,
	        cursor:"move"
	    };
			var dropOpts = {
	        activeClass: "activated",
	        drop: eventCallBack
	    }
	
			$('#fileTree').fileTree({ root: '', script: '<%= content_host_schedule_file_index_path(@host_id, @schedule_id, @file_index.id) + "?authenticity_token=" %>' + encodeURIComponent(AUTH_TOKEN) }, function(file) {
				alert(file);
			});
			//Make element draggable
	    $("#draggable").draggable(dragOpts);
	    //Make element droppable
	    $("#target").droppable(dropOpts);
		});
	</script>
<% end %>

<% content_for 'sub_menu' do %>
	<ul id="sub_menu">
			<li><%= link_to 'All Snapshots', host_schedule_file_indices_path(@host_id, @schedule_id) %></li>
			<li><%= link_to 'View Host', host_path(@host_id) %></li>
	</ul>
<% end %>

<h2>Snapshot: <%= @file_index.snapname.gsub!(/_/," ") if @file_index.snapname %></h2>
<div id="fileTree" class="demo"></div>
<div id="target"></div>