<% content_for 'head' do %>
	<%= javascript_include_tag 'jquery' %>
	<%= javascript_include_tag 'jquery.event.drag' %>
	<%= javascript_include_tag 'jquery.timers.js' %>
	<%= javascript_include_tag 'jquery.event.drop' %>
	<%= javascript_include_tag 'jquery.filetree' %>
	<%= stylesheet_link_tag 'jqueryFileTree' %>
	<style type="text/css">
      .demo{
					background-color:#EEEEEE;
          font-family:Verdana,Arial,Helvetica,sans-serif;
          font-size:11px;
          background-color:#FFFFFF;
          border-color:#BBBBBB #FFFFFF #FFFFFF #BBBBBB;
          border-style:solid;
          border-width:1px;
          height:400px;
          overflow:scroll;
          padding:5px;
          width:200px;
					cursor: move;
      }
	    #target {
	        width:200px;
	        height:200px;
	        border:3px solid #000;
	    
	        right:20px;
	        top:20px;
	        z-index:1;
	        float:right;
	        }
  </style>
	<%= javascript_tag "var AUTH_TOKEN = #{form_authenticity_token.inspect};" if protect_against_forgery? %>
  <script type="text/javascript">
		$(document).ready( function() {
			tree = $('<div />');
			tree.fileTree({ 
				root: '', 
				script: '<%= content_host_schedule_file_index_path(@host_id, @schedule_id, @file_index.id) + "?authenticity_token=" %>' + encodeURIComponent(AUTH_TOKEN),
				spinnerImage: '/images/jqueryFileTreeImages/spinner.gif',
				fakeTopRoot: true,
				fakeTopRootText: '/',
				dirExpandCallback: function(dir) {
				},
				dirCollapseCallback: function(dir) {
					return true;
				}
				
			});
			$('#fileTree').append( tree );
		});
	</script>
<% end %>

<% content_for 'sub_menu' do %>
	<ul id="sub_menu">
			<li><%= link_to 'All Snapshots', host_schedule_file_indices_path(@host_id, @schedule_id) %></li>
			<li><%= link_to 'View Host', host_path(@host_id) %></li>
	</ul>
<% end %>

<h2>Snapshot: <%= @file_index.snapname.gsub!(/_/," ") if @file_index.snapname %></h2>
<div id="fileTree" class="demo"></div>
